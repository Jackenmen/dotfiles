#!/usr/bin/env python3

import os
import sys

from lxml import etree, html


HOME = os.path.expanduser("~")

BASE = f"""<opt>
  <general />
</opt>"""


contents = sys.stdin.read() or BASE
root = etree.fromstring(contents)
general_node = root.find("general")
general_node.attrib["autofs_min"] = "1"
general_node.attrib["filename"] = "$nb_name_%Y-%m-%d_%H-%M-%S"
general_node.attrib["filetype"] = "0"
general_node.attrib["folder"] = f"{HOME}/Pictures/Screenshots"

print(etree.tostring(root).decode().replace("/>", " />"))
